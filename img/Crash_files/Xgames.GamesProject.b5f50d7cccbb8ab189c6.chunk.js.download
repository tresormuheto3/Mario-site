(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1240,627],{1077:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return d}));var r=n(656),o="ios",a="android",c=window.IS_MOBI_API?r.a.checkApp()?o:a:null,i=function(e,t){var n;try{switch(c){case o:window.webkit.messageHandlers.xgamesUpdateBalance.postMessage({userId:e,newBalance:t});break;case a:if(null===(n=window.xgamesWebHandler)||void 0===n?void 0:n.updateBalance){var r=JSON.stringify({userId:e,newBalance:t});window.xgamesWebHandler.updateBalance(r)}else window.location.href="http://updateBalance://".concat(e,"_").concat(t)}}catch(e){window.console.error("Failed to update balance.")}},u=function(e){try{switch(c){case a:var t=JSON.stringify({isActive:e});window.xgamesWebHandler.updateGameState(t);break;case o:window.webkit.messageHandlers.updateGameState.postMessage({isActive:e})}}catch(e){window.console.error("Failed to update game state.")}},s=function(e,t){try{switch(c){case a:var n=JSON.stringify({bonusCode:e,bonusId:t});window.xgamesWebHandler.updateBonuses(n);break;case o:window.webkit.messageHandlers.updateBonuses.postMessage({bonusCode:e,bonusId:t})}}catch(e){window.console.error("Failed to update bonuses.")}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{switch(c){case a:var t=JSON.stringify({gameIsActive:e});window.xgamesWebHandler.pageIsLoadedEvent(t);break;case o:window.webkit.messageHandlers.pageIsLoadedEvent.postMessage({gameIsActive:e})}}catch(e){window.console.error("Failed load game event.")}}},1084:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(29),o=n(1077),a=n(631),c={methods:{getMainUserId:function(){return r.c?r.c.getMainUserId()||0:r.a.user_balance?r.a.user_balance.getPrimaryUserId()||0:this.$store.getters["account/main_user_id"]||0},getMainCurrency:function(){return(null===r.c||void 0===r.c?void 0:r.c.getMainCurrencyIso())?r.c.getMainCurrencyIso():r.a.user_balance?r.a.user_balance.getPrimaryCurrency():this.$store.getters["account/main_currency_iso"]?this.$store.getters["account/main_currency_iso"]:a.a.getPageData.DEFAULT_CURRENCY.currencyName},getMainCurrencyId:function(){return r.c?r.c.getMainCurrencyId():r.a.user_balance?r.a.user_balance.getPrimaryCurrencyId():this.$store.getters["account/main_currency_id"]},getActiveUserId:function(){return r.c?r.c.getActiveUserId()||0:r.a.user_balance?r.a.user_balance.getMainUserId()||0:this.$store.getters["account/active_user_id"]||0},getActiveUserBalance:function(){if(r.c){var e=r.c.getAccounts().find((function(e){return e.isActive}));return e?e.money:0}return r.a.user_balance?r.a.user_balance.getMainBalance():this.$store.getters["account/accountActiveAccount"]?this.$store.getters["account/accountActiveAccount"].money:0},getActiveCurrency:function(){return(null===r.c||void 0===r.c?void 0:r.c.getActiveCurrencyIso())?r.c.getActiveCurrencyIso():r.a.user_balance?r.a.user_balance.getMainBalanceCurrency():this.$store.getters["account/active_currency_iso"]?this.$store.getters["account/active_currency_iso"]:a.a.getPageData.DEFAULT_CURRENCY.currencyName},getCurrencyFromAccountId:function(e){var t;return e?r.a.user_balance?r.a.user_balance.getCurrency(e):(null===(t=(r.c?r.c.getAccounts():this.$store.getters["account/accounts"]).find((function(t){return t.id===e})))||void 0===t?void 0:t.iso)||a.a.getPageData.DEFAULT_CURRENCY.currencyName:a.a.getPageData.DEFAULT_CURRENCY.currencyName},setPromoPoints:function(e){r.c?r.c.setPromoPoints(e):r.a.user_balance?r.a.user_balance.setPoints(e):this.$store.commit("account/setPromoPoints",e)},crutchUpdateBalance:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t&&n?t:0,c=n||0;r.c?a?r.c.updateUserBalance(a,c):r.c.updateAccountData():r.a.user_balance?r.a.user_balance.balanceUpdate(a,c):this.$store.state.account&&(a?this.$store.commit("account/setNewBalance",{account_id:a,new_balance:c}):this.$store.dispatch("account/accountUpdateData")),(null===(e=this.$consts)||void 0===e?void 0:e.is_mobi_api)&&Object(o.b)(a,c)},getCurrency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getCurrencyFromAccountId(e||this.getActiveUserId())},getAllUserAccounts:function(){return r.a.user_balance?r.a.user_balance.state.accounts:r.c?r.c.getAccounts():this.$store.getters["account/accounts"]?this.$store.getters["account/accounts"]:void 0},accounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getAllUserAccounts().filter((function(t){return-1!==[13,7,0].indexOf(t.type)&&(!e||e===t.id)})).map((function(e){var t=e.type,n=e.id;return{id:t?n:0,name:e.name}}))},getActiveCurrencyId:function(){return this.getActiveUserId()?r.a.user_balance?r.a.user_balance.getSelectAccount().id_currency:r.c?r.c.getAccounts().find((function(e){return e.isActive})).currencyId:this.$store.getters["account/accounts"]?this.$store.getters["account/active_currency_id"]:void 0:a.a.getPageData.DEFAULT_CURRENCY.currencyId}}}},2037:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(744),o=function(){return window.IS_MOBI_API?(new Date).getTimezoneOffset()/-60:Object(r.a)("tzo")}},3036:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t),n.d(t,"global",(function(){return a})),n.d(t,"get",(function(){return c})),n.d(t,"getBool",(function(){return i})),n.d(t,"set",(function(){return u})),n.d(t,"remove",(function(){return s}));var r=n(1),o=n(31);function a(e,t,n,o,a){return r.a.cookie_service.global(e,t,n,o,a)}function c(e,t){return r.a.cookie_service[o.a](e,t)}function i(e,t){return r.a.cookie_service[o.b](e,t)}function u(e,t,n){return r.a.cookie_service.setValueByDynamicKey(e,t,n)}function s(e,t){return r.a.cookie_service[o.c](e,t)}},3458:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),o=n.n(r),a=n(7),c=n.n(a),i=n(63),u=n.n(i),s=n(0),d=n.n(s),l=n(1),g=n(631),f=n(51);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={"Content-Type":"application/vnd.api+json",accept:"application/vnd.api+json"},p={data:function(){return{queryParams:{},isLoaded:!1,games:[]}},methods:h(h({},Object(f.mapMutations)("gamesProjectStore",["setToken","setIsUserAuth","setActiveAccountId"])),{},{mergeQueryParams:function(e){this.queryParams=h(h({},this.queryParams),e)},fetchGames:function(){this.games.length||(this.games=g.a.getPageData.GAMES_CONFIGS)},fetchQueryParams:function(){if(!this.isLoaded){this.setActiveAccountId(this.getActiveUserId()),this.setIsUserAuth(Boolean(this.getMainUserId()));var e={};Object.entries(g.a.getPageData.GAMES_QUERY).forEach((function(t){var n=u()(t,2),r=n[0],o=n[1];e[r]=null!=o?o:void 0})),this.mergeQueryParams(e),this.isLoaded=!0}},getGameRouteById:function(e){var t,n;return null!==(t=null===(n=this.games.find((function(t){return t.id===e})))||void 0===n?void 0:n.route)&&void 0!==t?t:""},getGameIdByRoute:function(e){var t,n;return null!==(t=null===(n=this.getGameByRoute(e))||void 0===n?void 0:n.id)&&void 0!==t?t:0},getGameByRoute:function(e){var t;return null!==(t=this.games.find((function(t){return t.route===e})))&&void 0!==t?t:{}},fetchUserAuthenticationToken:function(){var e=arguments,t=this;return c()(o.a.mark((function n(){var r,a,c,i,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]&&e[0],a=r?"?refresh=true":"",n.next=4,l.a.http_client.getRequest("/external-api/games/token".concat(a),{headers:v});case 4:return c=n.sent,i=c.data,u=i.data.attributes.userToken,t.setToken(u),n.abrupt("return",u);case 9:case"end":return n.stop()}}),n)})))()}})}},3459:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r="ourgames",o="xgames"},3805:function(e,t,n){"use strict";var r=n(3036);n.n(r).a},4285:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),a=n(7),c=n.n(a),i=n(63),u=n.n(i),s=n(0),d=n.n(s),l=n(3458),g=n(3459),f=n(38),m=n(1),h=n(1084),v=n(2037),p=n(801),b=n(102),y={namespaced:!0,state:function(){return{token:void 0,isUserAuth:!1,activeAccountId:0}},mutations:{setToken:function(e,t){e.token=t},setIsUserAuth:function(e,t){e.isUserAuth=t},setActiveAccountId:function(e,t){e.activeAccountId=t}},getters:{isUserAuth:function(e){return e.isUserAuth},activeAccountId:function(e){return e.activeAccountId},token:function(e){return e.token}}},w=n(51);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={whenceId:"wh",languageCode:"lg",currencyId:"cu",countryId:"co",userToken:"ut",activeAccountId:"ai",timezone:"tzo",widget:"wg",gamesBonusesId:"games_bonuses_id",gamesBonusesCode:"games_bonuses_code"},O={name:"GamesProjectPage",components:{GamesProjectFrame:function(){return n.e(1840).then(n.bind(null,4293))}},mixins:[l.a,h.a],beforeRouteLeave:function(e){window.location.href=e.fullPath},data:function(){return{gamesCategory:"",authenticationFailCounter:0}},computed:P(P({},Object(w.mapGetters)("gamesProjectStore",["isUserAuth"])),{},{isGamePage:function(){return!!this.$route.params.gameRoute},timeZone:function(){return Object(v.a)()},queryString:function(){var e={gamesBonusesId:this.$route.query.games_bonuses_id||0,gamesBonusesCode:this.$route.query.games_bonuses_code||0,timezone:this.timeZone,widget:this.$route.query.iframe_full?1:0},t=Object.entries(P(P({},this.queryParams),e)).reduce((function(e,t){var n=u()(t,2),r=n[0],o=n[1],a=A[r];return o&&a&&(e[a]=o),e}),{}),n=m.a.config.is_mobile?P({view:"Mobile"},t):P({},t);return new URLSearchParams(n).toString()},currentUrl:function(){var e,t=null!==(e=this.$route.params.gameRoute)&&void 0!==e?e:"";return t?this.createGameUrl(t):this.createLobbyUrl()}}),watch:{currentUrl:function(){this.setGamesCategory()},isUserAuth:function(e){var t=this;return c()(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,t.fetchUserAuthenticationToken();case 3:n.next=6;break;case 5:t.setToken(void 0);case 6:case"end":return n.stop()}}),n)})))()}},beforeCreate:function(){this.$store.registerModule("gamesProjectStore",y,{preserveState:this.$store.state.gamesProjectStore})},created:function(){window.disableAutoHideGlobalPreloader=!0,globalThis.addEventListener("balance.update_done",this.authFunction)},beforeDestroy:function(){this.$store.unregisterModule("gamesProjectStore")},mounted:function(){this.fetchGames(),this.fetchQueryParams(),this.setGamesCategory(),this.$route.query.games_bonuses_code&&this.$route.query.games_bonuses_id&&window.history.replaceState({},"",window.location.pathname)},methods:{authFunction:function(){this.setActiveAccountId(this.getActiveUserId()),this.setIsUserAuth(Boolean(this.getMainUserId()))},setGamesCategory:function(){this.gamesCategory=this.$route.query.category?String(this.$route.query.category):""},getUrlWithQuery:function(e){return"".concat("/games-frame").concat(e,"?").concat(this.queryString)},createGameUrl:function(e){var t=this.getGameIdByRoute(e);return this.getUrlWithQuery("/games/".concat(t))},createLobbyUrl:function(){var e=this.getUrlWithQuery("/lobby");return this.gamesCategory&&(e+="&category=".concat(this.gamesCategory)),e},onSetLobbyRoute:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$route.name!==g.a?this.$route.name===g.b&&t.category?this.$router.push({name:g.a,query:P(P({},this.$route.query),{},{category:t.category})}):(null===(e=this.previousRouteQuery)||void 0===e?void 0:e.category)?this.$router.back():this.$router.push({name:g.a}):t.category&&this.$router.replace({query:P(P({},this.$route.query),{},{category:t.category})})},onSetGameRoute:function(e){var t={35:"/dice/lobby",80:"/tvgames/view/pachinko",71:"/pokerlight/lobby",109:"/roulette/lobby",136:"/skingames"};if(t[e.id])window.location.href=t[e.id];else{var n=this.getGameRouteById(e.id);if(n){var r={name:g.b,params:{gameRoute:n},query:{}};e.bonus&&(r.query={games_bonuses_code:e.bonus.type,games_bonuses_id:e.bonus.id}),this.$router.push(r)}}},onSetPromotionRoute:function(e){var t={1:"/dailytournament",2:"/landing-beatus",3:"/promotions/1x-mundial",4:"/promotions/fastgames-daily-tournament"};e.id&&t[e.id]&&(window.location.href=t[e.id])},onSetRoute:function(e){switch(e.name){case"index":window.location.href="/";break;case"lobby":this.onSetLobbyRoute(e.params);break;case"game":this.onSetGameRoute(e.params);break;case"authorization":if(m.a.config.is_mobile||b.b)window.dispatchEvent(new CustomEvent("showAuthForm"));else{var t=document.getElementById("curLoginForm");t&&t.click()}break;case"registration":m.a.config.is_mobile?this.$router.push("/registration"):Object(p.f)("showReg");break;case"promotion":this.onSetPromotionRoute(e.params)}},onSetPageTitle:function(e){window.document.title=e.title},onShowAuthenticationFailed:function(e){var t=this;return c()(o.a.mark((function n(){var r,a,c,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.resolve,a=e.reject,!t.isUserAuth){n.next=15;break}return c=t.authenticationFailCounter>0,n.prev=3,n.next=6,t.fetchUserAuthenticationToken(c);case 6:i=n.sent,c?t.authenticationFailCounter=0:t.authenticationFailCounter++,r({token:i}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a({}),Object(f.errorAlert)(t.$T("xgames_error"));case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))()},onSetUserAccountBalance:function(e){(null==e?void 0:e.accountId)&&this.crutchUpdateBalance(e.accountId,e.balance),(null==e?void 0:e.points)&&this.setPromoPoints(e.points)},onSetScrollState:function(e){void 0!==(null==e?void 0:e.scroll)&&(document.documentElement.scrollTop=e.scroll),window.document.body.classList[e.isBlocked?"add":"remove"]("body--has-modal")},onSetScrollTop:function(){this.isGamePage||(document.documentElement.scrollTop=0)}}},I=(n(3805),n(26)),k=Object(I.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"games-project-page"},[e.isLoaded?n("GamesProjectFrame",{staticClass:"games-project-page__frame",attrs:{url:e.currentUrl,isGamePage:e.isGamePage},on:{setRoute:e.onSetRoute,setPageTitle:e.onSetPageTitle,showAuthenticationFailed:e.onShowAuthenticationFailed,setUserAccountBalance:e.onSetUserAccountBalance,setScrollState:e.onSetScrollState,setScrollTop:e.onSetScrollTop}}):e._e()],1)}),[],!1,null,null,null);t.default=k.exports},4286:function(e,t,n){"use strict";n.r(t);var r=n(3458),o=n(3459),a=-1,c=0,i=1,u={name:"GameProxyPage",mixins:[r.a],props:{gameRoute:{type:String,required:!0}},beforeRouteEnter:function(e,t,n){n()},beforeRouteUpdate:function(e,t,n){e.path===t.path||this.gamePageComponentType&&e.name!==o.b?n():window.location.href=e.fullPath},beforeRouteLeave:function(e,t,n){var r;this.gamePageComponentType?n():(null===(r=window.XgamesApp)||void 0===r||r.$destroy(),window.location.href=e.fullPath)},data:function(){return{gamePageComponentType:a}},computed:{gamePageComponent:function(){switch(this.gamePageComponentType){case c:return function(){return Promise.all([n.e(113),n.e(531)]).then(n.bind(null,4181))};case i:return function(){return Promise.resolve().then(n.bind(null,4285))};default:return}}},mounted:function(){var e=this;this.fetchGames();var t=this.games.find((function(t){return t.route===e.gameRoute}));t?this.gamePageComponentType=t.project:this.$router.push({name:o.a})}},s=n(26),d=Object(s.a)(u,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.gamePageComponent,{tag:"component"})}),[],!1,null,null,null);t.default=d.exports},631:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(4),c=n.n(a),i=n(6),u=n.n(i),s=n(21),d=n.n(s),l=n(28);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f=n.n(l)()("pageData"),m=function(){function e(){c()(this,e),Object.defineProperty(this,f,{writable:!0,value:null}),this.updatePageData()}return u()(e,[{key:"updatePageData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!e&&"undefined"!=typeof window&&window.XGAMES_INFO?d()(this,f)[f]=window.XGAMES_INFO:d()(this,f)[f]=e||{}}},{key:"getPageData",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d()(this,f)[f])}}]),e}();t.a=new m},656:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(6),c=n.n(a),i=n(29),u=n(744),s=function(){function e(){o()(this,e)}return c()(e,[{key:"checkBrowser",value:function(){return navigator.platform&&["iPad","iPhone","iPod"].includes(navigator.platform)}},{key:"checkApp",value:function(){return Number(Object(u.a)("mobile_app_whence",0))===i.k.iOS}}]),e}();t.a=new s},744:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(119),o=n(118),a=n(31),c=new r.a(o.a)[a.a]},801:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l}));n(37);var r=n(29),o=function(e){window.addEventListener("keypress",(function(t){return c(t,e)}))},a=function(){window.removeEventListener("keypress",c)};function c(e,t){13===(e=e||window.event).keyCode&&(e.preventDefault(),t())}var i=function(e,t){e=e.filter(Boolean);var n=function(n){var r=n.target;e.some((function(e){return e.contains(r)}))||t(r)};window.document.addEventListener("click",n);return function(){window.document.removeEventListener("click",n)}},u=function(e){return(r.o?r.n:"")+e},s=function e(t,n,r){return document.addEventListener(t,(function(e){for(var t=e.target;t&&undefined!==t;t=t.parentNode)if(t.matches(n)){r.call(t,e);break}}),!1),function(){document.removeEventListener(t,e)}},d=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.CustomEvent&&"function"==typeof window.CustomEvent?t=new CustomEvent(e,{detail:r}):(t=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r),n.dispatchEvent(t)},l=function(){window.global_preloader_hided||(window.global_preloader_hided=!0,d("hide_global_preloader",window))}}}]);